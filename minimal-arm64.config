# Minimal ARM64 kernel configuration for tiny-image

# Core ARM64 options
CONFIG_ARM64=y
CONFIG_64BIT=y
CONFIG_MMU=y
CONFIG_SMP=y
CONFIG_NR_CPUS=8

# Required for booting
CONFIG_BLK_DEV_INITRD=y
CONFIG_RD_GZIP=y
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_SCRIPT=y

# Virtual memory
CONFIG_SPARSEMEM=y
CONFIG_SPARSEMEM_VMEMMAP=y

# Filesystems
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y

# TTY and console
CONFIG_TTY=y
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y

# Virtio for QEMU
CONFIG_VIRTIO=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_VIRTIO_NET=y

# Power management
CONFIG_PM=y
CONFIG_PSCI=y

# PCI support (for some QEMU configs)
CONFIG_PCI=y
CONFIG_PCI_HOST_GENERIC=y

# RTC for QEMU
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_PL031=y

# Basic networking
CONFIG_NET=y
CONFIG_INET=y
CONFIG_NETDEVICES=y

# ARM architectural timer
CONFIG_ARM_ARCH_TIMER=y

# GIC interrupt controller
CONFIG_ARM_GIC=y
CONFIG_ARM_GIC_V3=y