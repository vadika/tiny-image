# Minimal kernel configuration for tiny-image
# Based on tinyconfig with necessary additions for initrd boot

# Core kernel options
CONFIG_64BIT=y
CONFIG_X86_64=y
CONFIG_SMP=y
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_SCRIPT=y

# Block layer (needed for initrd)
CONFIG_BLOCK=y
CONFIG_BLK_DEV_INITRD=y
CONFIG_INITRAMFS_SOURCE=""
CONFIG_RD_GZIP=y

# Executable file formats
CONFIG_HAVE_AOUT=y
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_SCRIPT=y
CONFIG_COREDUMP=y

# Pseudo filesystems
CONFIG_PROC_FS=y
CONFIG_PROC_SYSCTL=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y

# TTY and console
CONFIG_TTY=y
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y

# Power management
CONFIG_ACPI=y
CONFIG_ACPI_BUTTON=y

# PCI support (for virtio devices)
CONFIG_PCI=y

# Virtio drivers (for QEMU)
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_CONSOLE=y

# Network support (minimal)
CONFIG_NET=y
CONFIG_INET=y
CONFIG_NETDEVICES=y
CONFIG_VIRTIO_NET=y

# Crypto (required by some subsystems)
CONFIG_CRYPTO=y
CONFIG_CRYPTO_SHA256=y

# Debugging options
CONFIG_DEBUG_KERNEL=y
CONFIG_EARLY_PRINTK=y